<ion-view title="Estreias">

  <ion-content >
    <ion-refresher
        pulling-text="Arraste para atualizar..."
        on-refresh="refreshItems()" >
    </ion-refresher >

    
    <ion-list >
      <ion-item ng-repeat="estreia in estreias.results | filter:search" 
            ng-class=" isFavorite(estreia)? 'item-thumbnail-left favorite': 'item-thumbnail-left normal'"
              ng-click="showMovie(estreia)">
        <img ng-src="http://image.tmdb.org/t/p/w300/{{estreia.poster_path}}">
        <h2>{{::estreia.original_title}}</h2 >
        
         <p>
          <span >Data de Estreia:
            <i class="ion ion-ios-navigate" ></i>
            {{::estreia.release_date}}</span>
        </p>
         <p>
            <span>
              Nota:<i class="ion ion-star" ></i>#{{::estreia.vote_average}}
            </span>
         </p>

        <ion-option-button style="bg-color:red" ng-if="isFavorite(estreia)" class="ion-minus-circled"
            ng-click="removeFromFavorites(estreia); $event.stopPropagation();">
          &nbsp Favoritos
        </ion-option-button>
        <ion-option-button ng-if="!isFavorite(estreia)" class="ion-plus-circled"
            ng-click="addToFavorites(estreia); $event.stopPropagation();">
          &nbsp Favoritos
        </ion-option-button>

      </ion-item>
    </ion-list>

    <ion-infinite-scroll
        ng-if="moreDataCanBeLoaded()"
        on-infinite="nextPage()"
        distance="1%"
        immediate-check="false" >
    </ion-infinite-scroll >

    <div class="padding text-center"
         ng-if="!estreias.hasMore" >
      <p >Sem mais resultados</p >
    </div >
  </ion-content >
</ion-view>